[gd_scene load_steps=2 format=3 uid="uid://b2jf6uq34xi5o"]

[sub_resource type="GDScript" id="GDScript_tefi1"]
resource_name = "ship_list"
script/source = "extends PanelContainer

const InternalShip = preload(\"res://scripts/models/InternalShip.cs\")
const shipItemScene: PackedScene = preload(\"res://components/shiplist/ship_list_item.tscn\")
const ShipListItem = preload(\"res://components/shiplist/ship_list_item.gd\")

@onready var container: VBoxContainer = %ShipContainer

func _ready() -> void:
	Store.FleetUpdate.connect(_on_ships_updated)
	
func _on_ships_updated(ships: Array) -> void:
 	# clear children
	for child in container.get_children():
		container.remove_child(child)
		child.queue_free()
	# add ships
	for ship: InternalShip in ships:
		_add_ship(ship)

func _add_ship(ship: InternalShip) -> void:
	var shipNode: ShipListItem = shipItemScene.instantiate()
	container.add_child(shipNode)
	shipNode.set_ship(ship)
"

[node name="ShipList" type="PanelContainer"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
script = SubResource("GDScript_tefi1")

[node name="ScrollContainer" type="ScrollContainer" parent="."]
layout_mode = 2

[node name="ShipContainer" type="VBoxContainer" parent="ScrollContainer"]
unique_name_in_owner = true
layout_mode = 2
